<div class="aspect-square relative cursor-pointer transform transition-all duration-300 hover:scale-105"
  (click)="onCardClick()">
  <div class="w-full h-full relative perspective-1000">
    <div class="card-inner w-full h-full relative transition-transform duration-600"
      [class.flipped]="card.flipped || card.matched">
      
      <!-- Card Back (Question Mark) -->
      <div class="card-face card-back absolute inset-0 w-full h-full backface-hidden rounded-xl border-4 border-white bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center shadow-lg">
        <div class="text-white text-6xl font-bold opacity-80">
          <svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
          </svg>
        </div>
      </div>

      <!-- Card Front (Image or Text) -->
      <div class="card-face card-front absolute inset-0 w-full h-full backface-hidden rounded-xl border-4 border-white overflow-hidden shadow-lg"
        [class.matched]="card.matched">

        <!-- Image Card -->
        @if (card.isImageCard && card.image) {
        <img [src]="card.image" [alt]="card.name" class="w-full h-full object-cover transition-all duration-300"
          [class.brightness-110]="card.matched" [class.saturate-150]="card.matched">
        }

        <!-- Text Card -->
        @if (!card.isImageCard && card.text) {
        <div class="w-full h-full bg-gradient-to-br from-blue-100 via-blue-50 to-white flex items-center justify-center p-3">
          <div class="text-center">
            <div class="text-blue-900 font-semibold text-xs sm:text-sm leading-tight break-words">
              {{ card.text }}
            </div>
          </div>
        </div>
        }

        <!-- Fallback for image error -->
        @if (card.isImageCard && !card.image) {
        <div class="w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center">
          <div class="text-gray-500 text-center">
            <svg class="w-8 h-8 mx-auto mb-1" fill="currentColor" viewBox="0 0 24 24">
              <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
            </svg>
            <div class="text-xs">Imagen</div>
          </div>
        </div>
        }

        <!-- Matched Indicator -->
        @if (card.matched) {
        <div class="absolute top-2 right-2 bg-green-500 rounded-full p-1">
          <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
          </svg>
        </div>
        }
      </div>
    </div>
  </div>
</div>