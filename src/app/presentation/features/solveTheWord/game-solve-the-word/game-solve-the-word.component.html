<div class="flex flex-col items-center w-full min-h-screen bg-purple-50 p-4">
  <h1 class="text-2xl font-bold text-purple-500 mb-4">Encontrar todas las palabras ocultas en la sopa de letras</h1>

  <div class="w-full max-w-4xl flex flex-col lg:flex-row gap-4">
    <!-- Información del juego -->
    <div class="w-full lg:w-3/4 flex flex-col">
      <div class="flex justify-between items-center mb-2">
        <div class="text-purple-600">
          Palabras encontradas: {{wordsFound}}/{{totalWords}}
        </div>
        <div class="text-purple-600">
          Tiempo: {{formatTime(timeLeft)}}
        </div>
      </div>

      <!-- Barra de progreso -->
      <div class="w-full h-2 mb-4 bg-purple-200 rounded-full">
        <div class="h-full bg-purple-500 rounded-full"
             [style.width]="(wordsFound / totalWords * 100) + '%'"></div>
      </div>

      <!-- Cuadrícula de sopa de letras -->
      <div class="grid grid-cols-12 gap-1 p-2 bg-white rounded-lg shadow-md">
        @for (row of grid; track $index) {
          @for (cell of row; track $index) {
            <div class="w-8 h-8 md:w-10 md:h-10 flex items-center justify-center border rounded-md text-lg font-medium cursor-pointer"
                 [class.bg-purple-200]="cell.isFound"
                 [class.bg-purple-300]="selection.includes(cell)"
                 [class.text-purple-600]="cell.isFound"
                 (mousedown)="onCellMouseDown(cell)"
                 (mouseover)="onCellMouseOver(cell)"
                 (mouseup)="onCellMouseUp()">
              {{cell.letter}}
            </div>
          }
        }
      </div>
    </div>

    <!-- Lista de palabras a encontrar -->
    <div class="w-full lg:w-1/4">
      <div class="p-4 bg-white rounded-lg shadow-md">
        <h3 class="text-purple-500 mb-2">Palabras a encontrar:</h3>
        <div class="space-y-2">
          @for (word of words; track word.text) {
            <div class="p-2 rounded-lg text-center bg-purple-100"
                 [class.bg-purple-300]="word.found"
                 [class.line-through]="word.found">
              {{word.text}}
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de finalización del juego -->
  @if (wordsFound === totalWords) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
      <div class="bg-white p-6 rounded-lg shadow-lg text-center">
        <h2 class="text-2xl font-bold text-purple-600 mb-4">¡Felicidades!</h2>
        <p class="mb-4">Has encontrado todas las palabras en {{formatTime(347 - timeLeft)}}.</p>
        <button class="bg-purple-500 text-white py-2 px-4 rounded hover:bg-purple-600"
                onclick="location.reload()">
          Jugar de nuevo
        </button>
      </div>
    </div>
  }

  <!-- Modal de tiempo agotado -->
  @if (timeLeft === 0) {
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
      <div class="bg-white p-6 rounded-lg shadow-lg text-center">
        <h2 class="text-2xl font-bold text-red-600 mb-4">¡Tiempo agotado!</h2>
        <p class="mb-4">Encontraste {{wordsFound}} de {{totalWords}} palabras.</p>
        <button class="bg-purple-500 text-white py-2 px-4 rounded hover:bg-purple-600"
                onclick="location.reload()">
          Intentar de nuevo
        </button>
      </div>
    </div>
  }
</div>
