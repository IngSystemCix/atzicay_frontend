<!-- game-card.component.html -->
<div
  class="bg-white rounded-lg shadow-sm overflow-hidden transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md flex flex-col h-[420px]"
>
  <!-- Game Image -->
  <div
    class="h-64 bg-gray-200 flex justify-center items-center relative shrink-0"
  >
    <!-- Placeholder for game image -->
    <img
      [src]="image"
      alt="Game Image"
      class="w-full h-full object-cover object-center"
    />

    <!-- Menu button -->
    <button
      title="menu"
      (click)="dropdownToggle()"
      class="absolute top-2 right-2 p-1 rounded-full hover:bg-gray-100 transition-colors"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-5 w-5 text-gray-700"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"
        />
      </svg>
    </button>
    <div
      class="absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-md"
    >
      Autor: {{ author }}
    </div>

    <div
      #dropdownMenu
      [class.hidden]="!isDropdownOpen"
      class="absolute top-10 right-2 bg-white rounded-md shadow-lg py-1 z-10 w-48 border border-atzicay-dropdown-text"
    >
      <a
        href="#"
        class="flex items-center px-4 py-2 text-sm text-atzicay-dropdown-text hover:bg-gray-100"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4 mr-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"
          />
        </svg>
        Programar Juego
      </a>
      <a
        href="#"
        class="flex items-center px-4 py-2 text-sm text-atzicay-dropdown-text hover:bg-gray-100"
      >
        <i class="bi bi-plus-circle-dotted m-1"></i>
        Nuevo Juego plantilla
      </a>
    </div>
  </div>

  <div class="p-4 flex flex-col flex-grow overflow-hidden">
    <div class="flex justify-between items-start mb-2">
      <h3
        class="text-atzicay-purple-500 text-lg font-bold overflow-hidden overflow-ellipsis line-clamp-2 leading-snug"
      >
        {{ title }}
      </h3>
      <span
        [class]="levelClasses"
        class="px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ml-2"
      >
        {{ level === 'E' ? 'Fácil' : level === 'M' ? 'Intermedio' : 'Difícil' }}
      </span>
    </div>

    <!-- Game Description -->
    <p
      class="text-gray-500 text-sm mb-3 overflow-hidden overflow-ellipsis line-clamp-3 leading-relaxed flex-grow"
    >
      {{ description }}
    </p>

    <!-- Rating -->
    <div class="text-gray-400 text-xs mb-1">Puntuación</div>
    <div class="flex items-center mb-3">
      <span class="text-gray-600 font-medium mr-2">{{ rating }}</span>
      <div class="flex">
        @for (star of ratingArray; track star) {
        <svg
          xmlns="http://www.w3.org/2000/svg"
          [class]="star <= rating ? 'text-yellow-400' : 'text-gray-300'"
          class="h-4 w-4"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
          />
        </svg>
        }
      </div>
    </div>

    <!-- Play Button -->
    <button
      class="w-full btn-atzicay rounded-lg py-2 font-medium transition-colors duration-200 mt-auto"
    >
      Jugar Ahora
    </button>
  </div>
</div>
